<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>졸업 50주년 기념 초대장</title>

<script>
// OG 쿼리스트링 자동 생성
// 매번 페이지 열 때 timestamp 기반 → 캐시 회피
const version = new Date().getTime();

// OG 태그 동적 생성
const ogTitle = "고교 졸업 50주년 초대장";
const ogDescription = "졸업 50주년 기념 행사에 초대합니다.";
const ogImage = `page1.jpg?v=${version}`;
const ogURL = `${window.location.href.split('?')[0]}?v=${version}`;

// document.write는 DOM 로드 전 사용
document.write(`
<meta property="og:title" content="${ogTitle}">
<meta property="og:description" content="${ogDescription}">
<meta property="og:image" content="${ogImage}">
<meta property="og:url" content="${ogURL}">
`);
</script>

<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">

<style>
body, html { margin:0; padding:0; height:100%; background:#000; }
.swiper { width:100%; height:100%; }
.swiper-slide { display:flex; align-items:center; justify-content:center; background:#000; }
.swiper-slide img { width:100%; height:100%; object-fit:contain; }
</style>
</head>
<body>

<!-- 배경음악 -->
<audio id="bgm" src="music.mp3" loop></audio>

<!-- Swiper 슬라이드 -->
<div class="swiper">
    <div class="swiper-wrapper">
        <div class="swiper-slide"><div class="swiper-zoom-container"><img src="page1.jpg" alt="첫 번째 이미지"></div></div>
        <div class="swiper-slide"><div class="swiper-zoom-container"><img src="page2.jpg" alt="두 번째 이미지"></div></div>
        <div class="swiper-slide"><div class="swiper-zoom-container"><img src="page3.jpg" alt="세 번째 이미지"></div></div>
        <div class="swiper-slide"><div class="swiper-zoom-container"><img src="page4.jpg" alt="네 번째 이미지"></div></div>
    </div>
    <div class="swiper-pagination"></div>
</div>

<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

<script>
// 배경음악: 첫 터치 시 재생
const bgm = document.getElementById('bgm');
let hasStarted = false;
document.body.addEventListener('click', () => {
    if (!hasStarted) {
        bgm.volume = 0.2;
        bgm.play().catch(err => console.log("재생 차단:", err));
        hasStarted = true;
    }
}, { once: true });

// 화면 비율 기반 간격
function getSpaceBetween() { return Math.floor(window.innerWidth * 0.02); }

// Swiper 초기화
let swiper = new Swiper('.swiper', {
    direction: 'horizontal',
    slidesPerView: 1,
    spaceBetween: getSpaceBetween(),
    loop: false,
    zoom: true,
    pagination: { el: '.swiper-pagination', clickable: true },
});

// 화면 회전/리사이즈 시 간격 갱신
window.addEventListener('resize', () => {
    swiper.params.spaceBetween = getSpaceBetween();
    swiper.update();
});
</script>

</body>
</html>